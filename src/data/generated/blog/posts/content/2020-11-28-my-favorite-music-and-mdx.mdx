**Spotify** just created a playlist with the most listened songs by me during this 2020, so, I took this opportunity to write a tutorial about [MDX](https://mdxjs.com/) and [Next.js](https://nextjs.org).

> **MDX** is a **Markdown** language enhancement, making it more powerful and customizable, because **MDX** allows rendering **React components** inside of **Markdown** files.

This tutorial was written using **MDX**, so, below, you can see an example of a **React component** rendered in this post.

<Playground
	language="tsx"
	Preview={() => {
		return <MFMAMHelloWorldMDX text="I'm a React component that uses Tailwind CSS for styling" />;
	}}
	sourceCode={DATA.post.assets.$sourceCodeFiles["1"]}
	height={300}
/>

## Setting up **Next.js** and MDX

I built this website using **Next.js**, I'm going to talk about how I configured **MDX** to create the blog section. To accomplish it, this [article](https://sergiodxa.com/articles/using-mdx-with-remote-content) posted by [Sergio Xalambr√≠](https://twitter.com/sergiodxa) was helpful for me.

First of all, I configured **MDX** with **Next.js** and in this [link](https://mdxjs.com/getting-started/next) you can check out the instructions, it is really easy to complete it.

Then, I installed the [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote) package. This package allows rendering **MDX** files that can be hosted on a remote location, for example, a **CMS**, a **CDN**, a **database** or anywhere. There are other reasons for which it is useful to use this package, in this [section of its GitHub repository](https://github.com/hashicorp/next-mdx-remote#background--theory) you can dig deep in the problems that **next-mdx-remote** solves.

Now, I'm going to explain how to use **next-mdx-remote** for rendering a blog post in a **Next.js** page depending on a URL param.

First, I created the `getStaticPaths` function where the `paths` property is an array of slugs of all my blog posts that I want to **pre-render**.

<SourceCode
	fileName={DATA.post.assets.github.files["pages|blog|slug"].fileName}
	language="typescript"
	code={DATA.post.assets.$sourceCodeFiles["4"]}
	sourceURL={DATA.post.assets.github.files["pages|blog|slug"].url}
/>

> I chose the **static-site generation** approach because I don't have a lot of pages, probably less than 20 and its content does not change often. I recommend reading more about this topic in this [Next.js docs page](https://nextjs.org/docs/basic-features/data-fetching), its explanation is very clear.

Now, inside of the `getStaticProps` function, the **MDX** content of all blog posts is readed. This function only executes at build time, I mean, on the server side. At the moment I store all my blog posts **MDX** files inside of this website repository. In the future, I could store them on a **CMS**, for example.

<SourceCode
	fileName={DATA.post.assets.github.files["pages|blog|slug"].fileName}
	language="typescript"
	code={DATA.post.assets.$sourceCodeFiles["5"]}
	sourceURL={DATA.post.assets.github.files["pages|blog|slug"].url}
/>

> **Problem:** I can't import components or variables directly inside of **MDX** files when I use **next-mdx-remote** to compile them. In this [link](https://github.com/hashicorp/next-mdx-remote#caveats) you can read more about this.

> **Solution:** I had to pass a config object when I invoked the `serialize` function. The `scope` property is an object that contains the **data (variables)** that I need to use inside of my **MDX** files.

Finally, this is the component that renders a blog post:

<SourceCode
	fileName={DATA.post.assets.github.files["components|blog|slug"].fileName}
	language="tsx"
	code={DATA.post.assets.$sourceCodeFiles["6"]}
	sourceURL={DATA.post.assets.github.files["components|blog|slug"].url}
/>

In regards to the **MDX** components styling, at the beginning I used this [Tailwind CSS plugin](https://tailwindcss.com/docs/typography-plugin), but then, I decided don't use it anymore and I built a component with my own styles.

<SourceCode
	fileName={DATA.post.assets.github.files["MDXContent"].fileName}
	language="tsx"
	code={DATA.post.assets.$sourceCodeFiles["7"]}
	sourceURL={DATA.post.assets.github.files["MDXContent"].url}
/>
<SourceCode
	fileName={DATA.post.assets.github.files["MDXContent-Styles"].fileName}
	language="css"
	code={DATA.post.assets.$sourceCodeFiles["7-styles"]}
	sourceURL={DATA.post.assets.github.files["MDXContent-Styles"].url}
/>

> `@apply` directive allows me to use **Tailwind CSS** classes within my `css.modules` files.

I used [prism-react-renderer](https://github.com/FormidableLabs/prism-react-renderer) for code syntax highlighting:

<SourceCode
	fileName={DATA.post.assets.github.files["SourceCode"].fileName}
	language="tsx"
	code={DATA.post.assets.$sourceCodeFiles["8"]}
	sourceURL={DATA.post.assets.github.files["SourceCode"].url}
/>

## Final words

I share the URL of this repository in case of you want to see more details about my website and my blog section were implemented. Allright, this is all, thanks for reading.

<MFMAMGitHubRepo
	name={DATA.post.assets.github.name}
	url={DATA.post.assets.github.url}
	description={DATA.post.assets.github.description}
/>

I share the **Spotify** playlist for which I wrote down this blog post:

<MFMAMSpotifyPlaylist />
